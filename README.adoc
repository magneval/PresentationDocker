// ---
// layout: master
// title: Présentation VM et docker
// :backend: deckjs
// ---
:revealjs_mouseWheel: true
:revealjs_history: true
:revealjs_hideAddressBar: true


= Presentation VM Docker

:link-github-project-ghpages: https://magneval.github.io/PresentationDocker
:link-demo-html: {link-github-project-ghpages}/demo.html
:link-demo-pdf: {link-github-project-ghpages}/demo.pdf
:link-demo-adoc: https://raw.githubusercontent.com/magneval/PresentationDocker/master/demo.adoc

== Presentation Docker

Charles de MAGNEVAL +
charles.de_magneval@open-groupe.com +
v1.0, 2017-04-10 +
 +
https://github.com/magneval/

=== Plan
[%step]
* historique
* la virtualisation
* les hypervirseurs
* l'approche containeur
* le cloud

== Historique

=== l'ordinateur 8 bits
[%step]
* un processeur
* la ram
* la rom
* le stockage de masse
* le programme

=== la version 16 bits
[%step]
* le multitache
* le reseau
* pas un programme, un OS

=== les OS
* dos
* OS400
* Unix
* windows
* Linux
* Mac OS X

[NOTE.speaker]
--
aparition d'api sur les couches basses +
drivers +
standardisation
--

== la virtualisation

=== la virtualisation

* La migration IBM 36 vers IBM38 Oblige IBM a faire le premier emulateur.

* On peut faire tourner une machine dans une autre. +
La machine devient un simple programme 

=== !

image::https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Diagramme_ArchiEmulateur.png/1169px-Diagramme_ArchiEmulateur.png[canvas,size=contain]

=== la virtualisation

Il existe de nombreuses solutions :

* VMware
* Qemu
* VirtualBox
* Virtual PC

[NOTE.speaker]
--
On utilse tous une JVM
--

=== les hypervirseurs

* L'approche est similaire, mais l'OS est allege pour permettre un acces plus rapide aux couches basse du systeme et donc ameliorer les performances. 

* Cette technique peut aussi etre aidee par des instructions special dans le coeur du processeur permettant un changement de contexte pour passer d'un OS a l'autre

=== !

image::https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Diagramme_ArchiHyperviseur.png/1169px-Diagramme_ArchiHyperviseur.png[canvas,size=contain]

=== les hypervirseurs

Les plus courrants sont :

* VMware ESX serveur
* Xen (Citrix)
* Microsoft Hyper-V Server

=== l'approche containeur

Ici plus de couche intermediaires, on separe juste le programme des autres

=== !

image::https://upload.wikimedia.org/wikipedia/commons/3/38/Diagramme_ArchiIsolateur.png[canvas,size=contain]

=== l'approche containeur

L'approche existe depuis longtemps :

* chroot
* BSD Jail
* Zone Solaris 
* LXC

== Docker

=== !

Solution basee sur des techniques existantes dans le noyau Linux et eprouvees :

* LXC,
* CGgroup,
* vritualisaton du reseau,
* UnionFS,
* ...

=== Aproche legere

Il s'appuie plutôt sur les fonctionnalités du noyau et utilise l'isolation de ressources :

* le processeur,
* la mémoire,
* les entrées et sorties
* les connexions réseaux

=== Docker

gestion des espaces de noms séparés pour isoler le système d'exploitation tel que vu par l'application

Il peut tourner sous d'autre plate-forme comme MacOS X ou Windows (mais via une VM Linux)

=== Les briques de Docker

* Le registry
* Les Images
* Les containers

=== Docker Registry

* Centralisation des images

* possibilite de :
** puller
** pusher

=== Docker Images

* ensembles de couches contenant le systeme de fichier
* compose a partir
** de couches de bases
** d'action 
* creer a partir de docker file
* Contient aussi :
** les services reseaux (ports ouvert)
** Les dossiers Partages
** Le Programme

[NOTE.speaker]
--
Cette image est compose d'une image disque basique agrementer d'actions d'installations complementaires.
Le processus est definis par le "Docker file".
--

=== Les bases de Docker

Une fois l'image generre, elle peut etre reutiliser autant de fois que souhaite par le principe du COW.

Le Copy On Write, permet de ne faire une copie que de ce qui doit etre modifier et donc de reduire la taille de deux image differentes a la taille des fichiers modifies.

Une même image peut etre referencer dans la ceation de nombreux container

=== Docker

Les couches d'images peuvent etre partage pour eviter de le recree a chaque fois.

Le "Docker file" contient aussi la definitiion des ports reseau presente et des dossier partage entre le systeme hote et le container.


== Docker Compose


== Docker Swarm


== le cloud


